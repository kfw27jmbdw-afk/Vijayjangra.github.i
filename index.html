<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spotify-like Music Player</title>
<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background-color: #121212;
    color: white;
  }

  .player {
    display: flex;
    flex-direction: column;
    height: 100vh;
    width: 100%;
  }

  .top-bar {
    display: flex;
    justify-content: space-between;
    padding: 15px 30px;
    background-color: #1c1c1c;
    align-items: center;
  }

  .top-bar h1 {
    margin: 0;
    font-size: 20px;
  }

  .playlist {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
  }

  .song {
    display: flex;
    justify-content: space-between;
    padding: 10px;
    margin-bottom: 10px;
    background-color: #1e1e1e;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.2s;
  }

  .song:hover {
    background-color: #333;
  }

  .controls {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    background-color: #1c1c1c;
  }

  .controls button {
    background: none;
    border: none;
    color: white;
    margin: 0 20px;
    font-size: 24px;
    cursor: pointer;
  }

  .controls button:hover {
    color: #1db954;
  }

  input[type="file"] {
    display: none;
  }

  label {
    background-color: #1db954;
    padding: 8px 15px;
    border-radius: 20px;
    cursor: pointer;
    font-size: 14px;
  }

  audio {
    width: 100%;
    outline: none;
  }
</style>
</head>
<body>
<div class="player">
  <div class="top-bar">
    <h1>Spotify Player</h1>
    <div>
      <label for="fileInput">Upload Local Music</label>
      <input type="file" id="fileInput" multiple accept="audio/*">
      <label for="driveInput">Google Drive URL</label>
      <input type="text" id="driveInput" placeholder="Paste Google Drive File URL">
      <button id="addDrive">Add</button>
    </div>
  </div>

  <div class="playlist" id="playlist"></div>

  <div class="controls">
    <button id="prev">&#9664;&#9664;</button>
    <button id="play">&#9654;</button>
    <button id="next">&#9654;&#9654;</button>
  </div>

  <audio id="audio"></audio>
</div>

<script>
  const fileInput = document.getElementById('fileInput');
  const driveInput = document.getElementById('driveInput');
  const addDrive = document.getElementById('addDrive');
  const playlist = document.getElementById('playlist');
  const audio = document.getElementById('audio');
  const playBtn = document.getElementById('play');
  const prevBtn = document.getElementById('prev');
  const nextBtn = document.getElementById('next');

  let songs = [];
  let currentIndex = 0;

  function addSong(name, src) {
    songs.push({ name, src });
    const songDiv = document.createElement('div');
    songDiv.classList.add('song');
    songDiv.textContent = name;
    songDiv.addEventListener('click', () => {
      currentIndex = songs.indexOf(songs.find(s => s.name === name));
      playSong();
    });
    playlist.appendChild(songDiv);
  }

  fileInput.addEventListener('change', (e) => {
    const files = e.target.files;
    for (let file of files) {
      const url = URL.createObjectURL(file);
      addSong(file.name, url);
    }
  });

  addDrive.addEventListener('click', () => {
    const url = driveInput.value.trim();
    if (!url) return alert('Enter a valid Google Drive URL');
    // Convert Google Drive link to direct download
    const fileId = url.match(/[-\w]{25,}/);
    if (!fileId) return alert('Invalid Google Drive URL');
    const directURL = `https://drive.google.com/uc?export=download&id=${fileId[0]}`;
    const name = `Drive Song ${songs.length+1}`;
    addSong(name, directURL);
    driveInput.value = '';
  });

  function playSong() {
    if (!songs.length) return;
    audio.src = songs[currentIndex].src;
    audio.play();
    playBtn.textContent = '⏸';
  }

  playBtn.addEventListener('click', () => {
    if (!audio.src) return;
    if (audio.paused) {
      audio.play();
      playBtn.textContent = '⏸';
    } else {
      audio.pause();
      playBtn.textContent = '▶';
    }
  });

  prevBtn.addEventListener('click', () => {
    if (songs.length === 0) return;
    currentIndex = (currentIndex - 1 + songs.length) % songs.length;
    playSong();
  });

  nextBtn.addEventListener('click', () => {
    if (songs.length === 0) return;
    currentIndex = (currentIndex + 1) % songs.length;
    playSong();
  });

  audio.addEventListener('ended', () => {
    nextBtn.click();
  });
</script>
</body>
</html>